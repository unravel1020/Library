{"ast":null,"code":"export function fadeTransition(renderer) {\n  const transitionObjects = new Set();\n\n  // 添加过渡效果到对象\n  function addTransitionEffect(object) {\n    if (!object.userData) object.userData = {};\n    object.userData.originalScale = object.scale.clone();\n    object.userData.originalOpacity = object.material.opacity;\n    transitionObjects.add(object);\n  }\n\n  // 执行过渡动画\n  function animateTransition() {\n    transitionObjects.forEach(object => {\n      if (object.userData.transitioning) {\n        const progress = object.userData.transitionProgress || 0;\n\n        // 更新不透明度\n        if (object.material.opacity !== undefined) {\n          object.material.opacity = Math.sin(progress * Math.PI);\n        }\n\n        // 更新缩放\n        const scale = 1 + Math.sin(progress * Math.PI) * 0.2;\n        object.scale.set(object.userData.originalScale.x * scale, object.userData.originalScale.y * scale, object.userData.originalScale.z * scale);\n        object.userData.transitionProgress += 0.02;\n        if (object.userData.transitionProgress >= 1) {\n          object.userData.transitioning = false;\n          transitionObjects.delete(object);\n        }\n      }\n    });\n  }\n\n  // 开始过渡\n  function startTransition(object) {\n    if (!object.userData) object.userData = {};\n    object.userData.transitioning = true;\n    object.userData.transitionProgress = 0;\n    addTransitionEffect(object);\n  }\n\n  // 添加到渲染循环\n  const originalRender = renderer.render;\n  renderer.render = function (scene, camera) {\n    animateTransition();\n    originalRender.call(this, scene, camera);\n  };\n  return {\n    startTransition,\n    addTransitionEffect\n  };\n}","map":{"version":3,"names":["fadeTransition","renderer","transitionObjects","Set","addTransitionEffect","object","userData","originalScale","scale","clone","originalOpacity","material","opacity","add","animateTransition","forEach","transitioning","progress","transitionProgress","undefined","Math","sin","PI","set","x","y","z","delete","startTransition","originalRender","render","scene","camera","call"],"sources":["D:/啥都行/智慧图书馆/smart_library/frontend/src/threejs/fadeTransition.js"],"sourcesContent":["export function fadeTransition(renderer) {\r\n  const transitionObjects = new Set();\r\n  \r\n  // 添加过渡效果到对象\r\n  function addTransitionEffect(object) {\r\n    if (!object.userData) object.userData = {};\r\n    object.userData.originalScale = object.scale.clone();\r\n    object.userData.originalOpacity = object.material.opacity;\r\n    transitionObjects.add(object);\r\n  }\r\n\r\n  // 执行过渡动画\r\n  function animateTransition() {\r\n    transitionObjects.forEach(object => {\r\n      if (object.userData.transitioning) {\r\n        const progress = object.userData.transitionProgress || 0;\r\n        \r\n        // 更新不透明度\r\n        if (object.material.opacity !== undefined) {\r\n          object.material.opacity = Math.sin(progress * Math.PI);\r\n        }\r\n        \r\n        // 更新缩放\r\n        const scale = 1 + Math.sin(progress * Math.PI) * 0.2;\r\n        object.scale.set(\r\n          object.userData.originalScale.x * scale,\r\n          object.userData.originalScale.y * scale,\r\n          object.userData.originalScale.z * scale\r\n        );\r\n        \r\n        object.userData.transitionProgress += 0.02;\r\n        if (object.userData.transitionProgress >= 1) {\r\n          object.userData.transitioning = false;\r\n          transitionObjects.delete(object);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // 开始过渡\r\n  function startTransition(object) {\r\n    if (!object.userData) object.userData = {};\r\n    object.userData.transitioning = true;\r\n    object.userData.transitionProgress = 0;\r\n    addTransitionEffect(object);\r\n  }\r\n\r\n  // 添加到渲染循环\r\n  const originalRender = renderer.render;\r\n  renderer.render = function(scene, camera) {\r\n    animateTransition();\r\n    originalRender.call(this, scene, camera);\r\n  };\r\n\r\n  return {\r\n    startTransition,\r\n    addTransitionEffect\r\n  };\r\n} "],"mappings":"AAAA,OAAO,SAASA,cAAcA,CAACC,QAAQ,EAAE;EACvC,MAAMC,iBAAiB,GAAG,IAAIC,GAAG,CAAC,CAAC;;EAEnC;EACA,SAASC,mBAAmBA,CAACC,MAAM,EAAE;IACnC,IAAI,CAACA,MAAM,CAACC,QAAQ,EAAED,MAAM,CAACC,QAAQ,GAAG,CAAC,CAAC;IAC1CD,MAAM,CAACC,QAAQ,CAACC,aAAa,GAAGF,MAAM,CAACG,KAAK,CAACC,KAAK,CAAC,CAAC;IACpDJ,MAAM,CAACC,QAAQ,CAACI,eAAe,GAAGL,MAAM,CAACM,QAAQ,CAACC,OAAO;IACzDV,iBAAiB,CAACW,GAAG,CAACR,MAAM,CAAC;EAC/B;;EAEA;EACA,SAASS,iBAAiBA,CAAA,EAAG;IAC3BZ,iBAAiB,CAACa,OAAO,CAACV,MAAM,IAAI;MAClC,IAAIA,MAAM,CAACC,QAAQ,CAACU,aAAa,EAAE;QACjC,MAAMC,QAAQ,GAAGZ,MAAM,CAACC,QAAQ,CAACY,kBAAkB,IAAI,CAAC;;QAExD;QACA,IAAIb,MAAM,CAACM,QAAQ,CAACC,OAAO,KAAKO,SAAS,EAAE;UACzCd,MAAM,CAACM,QAAQ,CAACC,OAAO,GAAGQ,IAAI,CAACC,GAAG,CAACJ,QAAQ,GAAGG,IAAI,CAACE,EAAE,CAAC;QACxD;;QAEA;QACA,MAAMd,KAAK,GAAG,CAAC,GAAGY,IAAI,CAACC,GAAG,CAACJ,QAAQ,GAAGG,IAAI,CAACE,EAAE,CAAC,GAAG,GAAG;QACpDjB,MAAM,CAACG,KAAK,CAACe,GAAG,CACdlB,MAAM,CAACC,QAAQ,CAACC,aAAa,CAACiB,CAAC,GAAGhB,KAAK,EACvCH,MAAM,CAACC,QAAQ,CAACC,aAAa,CAACkB,CAAC,GAAGjB,KAAK,EACvCH,MAAM,CAACC,QAAQ,CAACC,aAAa,CAACmB,CAAC,GAAGlB,KACpC,CAAC;QAEDH,MAAM,CAACC,QAAQ,CAACY,kBAAkB,IAAI,IAAI;QAC1C,IAAIb,MAAM,CAACC,QAAQ,CAACY,kBAAkB,IAAI,CAAC,EAAE;UAC3Cb,MAAM,CAACC,QAAQ,CAACU,aAAa,GAAG,KAAK;UACrCd,iBAAiB,CAACyB,MAAM,CAACtB,MAAM,CAAC;QAClC;MACF;IACF,CAAC,CAAC;EACJ;;EAEA;EACA,SAASuB,eAAeA,CAACvB,MAAM,EAAE;IAC/B,IAAI,CAACA,MAAM,CAACC,QAAQ,EAAED,MAAM,CAACC,QAAQ,GAAG,CAAC,CAAC;IAC1CD,MAAM,CAACC,QAAQ,CAACU,aAAa,GAAG,IAAI;IACpCX,MAAM,CAACC,QAAQ,CAACY,kBAAkB,GAAG,CAAC;IACtCd,mBAAmB,CAACC,MAAM,CAAC;EAC7B;;EAEA;EACA,MAAMwB,cAAc,GAAG5B,QAAQ,CAAC6B,MAAM;EACtC7B,QAAQ,CAAC6B,MAAM,GAAG,UAASC,KAAK,EAAEC,MAAM,EAAE;IACxClB,iBAAiB,CAAC,CAAC;IACnBe,cAAc,CAACI,IAAI,CAAC,IAAI,EAAEF,KAAK,EAAEC,MAAM,CAAC;EAC1C,CAAC;EAED,OAAO;IACLJ,eAAe;IACfxB;EACF,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module"}